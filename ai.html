<script>
function OpenaiFetchAPI(PROMPT, model, key) {
    alert("Calling Legacy Model");
    var url = "https://api.openai.com/v1/completions";
    var bearer = 'Bearer ' + key;
    fetch(url, {
        method: 'POST',
        headers: {
            'Authorization': bearer,
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            "model": model,
            "prompt": PROMPT,
            "temperature": 0.7,
            "max_tokens": 256,
            "top_p": 1,
            "frequency_penalty": 0,
            "presence_penalty": 0
        })


    }).then(response => {
        
        return response.json()
       
    }).then(data=>{
        console.log(data)
        console.log(typeof data)
        console.log(Object.keys(data))
        document.getElementById('airesponse').innerText = data['choices'][0].text
        alert(data['choices'][0].text)

        
    })
        .catch(error => {
            alert('Something bad happened ' + error)
        });

}; 



</script>


		 <div class="filter"></div>
		  <h3>OpenAI<hr></h3>

<select id="models" class="dropdown">
    <option value="text-davinci-003">Davinci-3 (Default & most capable)</option>
</select>

<h2>Key:</h2>
<input id="keyinput" type="password" value=""></input>

<h2>The Question:</h2>
  <textarea id="aiinput" style="width:600px; height:100px;" value="Text here"></textarea>
  <br>
<div>
        <ul class="nav-bar"><div class="bg"></div>
			<li><a class="nav-link" onclick="OpenaiFetchAPI(PROMPT = (document.getElementById('aiinput').value), model = String(document.getElementById('models').value), key = String(document.getElementById('keyinput').value));" class="border">Click Me</a></li>
		 </ul>
		  </div>
<!--
<p>The response:</p>
<p id="airesponse"> Response will generate here. </p>
-->
			  <br>
		  </div>
<p>The response:</p>
<p id="airesponse" class="border"> Response will generate here. </p>
<style>
.border {
  font-size: 30px;
  text-align: center;
  border: green 2px solid;
}
</style>
<br>
